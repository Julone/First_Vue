(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-76a019ab"],{"34a3":function(e,t,a){e.exports=a.p+"static/img/logo-text-static.24b15001.svg"},"451c":function(e,t,a){},a55b:function(e,t,a){"use strict";a.r(t);var s=a("0649"),r=a.n(s),n=(a("f5ff"),a("41dd")),i=a.n(n),o=(a("c764"),a("fd2d")),c=a("2be9"),l={data:function(){return{loginState:!0,loginId:"",loginPass:"",regId:"",regPass:"",regName:"",accept:!0,errorTime:0,loading:!0,nowTime:+new Date}},created:function(){var e=this;"/reg"==this.$route.path?this.loginState=!1:this.loginState=!0,this.getLeftTime<=300&&(this.errorTime=4),setInterval(function(){e.nowTime=+new Date},1e3)},components:{foot:o.a},watch:{loginState:function(){this.$nextTick(function(){i()($(".user").find("input")).forEach(function(e){e.style.borderColor="#dcdfe6"})})},errorTime:function(e){3==e&&Object(c.k)("errorInLoginTime",+new Date)},getLeftTime:function(e){e<=0&&(this.errorTime=0,Object(c.e)("errorInLoginTime"))}},computed:{minH:function(){return this.$store.state.innerHeight-55+"px"},getLeftTime:function(){return r()(300-(this.nowTime-Object(c.f)("errorInLoginTime"))/1e3)}},methods:{imgComplete:function(){this.loading=!1},changeLogin:function(){this.loginState=!this.loginState},login:Object(c.d)(function(){var e=this;this.validateLogin()&&this.errorTime<=3&&(this.$message({message:"正在登录,请稍候...",center:!0,type:"info"}),axios({method:"post",url:this.$store.state.login,data:{userId:this.loginId,userPass:this.loginPass}}).then(function(t){200==t.data.code?(Object(c.k)("userId",t.data.userData.userId),Object(c.k)("userPass",t.data.userData.userPass),Object(c.k)("userName",t.data.userData.userName),Object(c.k)("isAdmin",t.data.userData.isAdmin),""!=t.data.userData.userIcon&&Object(c.k)("userIcon",e.$store.state.srcCom+"nav/"+t.data.userData.userIcon),e.$router.push("/comment")):(e.errorTime++,e.$message({message:3<=e.errorTime?"已锁定, 请在 5分钟后, 再尝试登录!":"再输错 "+(3-e.errorTime)+"次,将禁止登录 5分钟!",center:!0,type:"error",duration:2e3}))}))},1e3),register:Object(c.d)(function(){var e=this;this.validateReg()&&(this.$message({message:"正在注册,请稍候...",center:!0,type:"info"}),axios({method:"post",url:this.$store.state.register,data:{userId:this.regId,userPass:this.regPass,userName:this.regName}}).then(function(t){200==t.data.code?(Object(c.k)("userId",t.data.userData.userId),Object(c.k)("userPass",t.data.userData.userPass),Object(c.k)("userName",t.data.userData.userName),e.$alert("注册成功,快去登录吧","恭喜你",{confirmButtonText:"马上登录",type:"info",callback:function(t){e.$data.loginState=!0,e.$data.loginId=Object(c.f)("userId"),e.$data.loginPass=Object(c.f)("userPass")}})):e.$message({message:t.data.msg,center:!0,type:"error"})}))},1e3),validateName:function(e,t){return/^[\u4e00-\u9fa5a-zA-Z]{2,20}/.test(e)?(t.target.style.borderColor="#67C23A",!0):!(t.target.style.borderColor="red")},validateId:function(e,t){return/^[\w@_.-]{5,25}$/.test(e)?(t.target.style.borderColor="#67C23A",!0):!(t.target.style.borderColor="red")},validatePass:function(e,t){return/^[\w_.?-]{5,25}/.test(e)?(t.target.style.borderColor="#67C23A",!0):!(t.target.style.borderColor="red")},validateLogin:function(){return""!=this.loginId&&""!=this.loginPass||(this.$message({message:"请填写完整登录信息!",type:"warning",center:!0}),!1)},validateReg:function(){return""!=this.regId&&""!=this.regPass&&""!=this.regName||(this.$message({message:"请填写完整注册信息!",type:"warning",center:!0}),!1)}}},u=(a("eab2"),a("fc05")),d=Object(u.a)(l,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user container"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.loginState,expression:"loginState"}],staticClass:"loginWrapper"},[s("img",{attrs:{src:a("34a3"),width:"70%",alt:""},on:{load:e.imgComplete}}),e.loading?e._e():s("div",{staticClass:"login"},[s("span",[e._v("请输入登录账号(Login Account)")]),s("el-input",{attrs:{placeholder:"请输入登录账号",clearable:""},on:{blur:function(t){return e.validateId(e.loginId,t)}},model:{value:e.loginId,callback:function(t){e.loginId=t},expression:"loginId"}}),s("span",[e._v("请输入登录密码(Login Password)")]),s("el-input",{attrs:{placeholder:"请输入登录密码",type:"password",clearable:""},on:{blur:function(t){return e.validatePass(e.loginPass,t)}},nativeOn:{keyup:function(t){return"keyCode"in t&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.loginPass,callback:function(t){e.loginPass=t},expression:"loginPass"}}),s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("el-button",{staticStyle:{margin:"0"},attrs:{type:"text"},on:{click:e.changeLogin}},[e._v("账号注册")]),s("el-button",{staticStyle:{margin:"0"},attrs:{type:"text",disabled:""},on:{click:function(t){return e.$router.push("/findpass")}}},[e._v("密码找回")])],1),s("div",{staticStyle:{margin:"5px 0 -5px","text-align":"center",filter:"grayscale(.5)"}},[s("el-checkbox",{staticStyle:{transform:"scale(1)"},model:{value:e.accept,callback:function(t){e.accept=t},expression:"accept"}},[s("span",{staticClass:"accept_text"},[e._v("我已阅读并接受"),s("a",[e._v("《用户协议》")]),e._v("和"),s("a",[e._v("《隐私政策》")])])])],1),s("div",{staticClass:"btns"},[s("el-button",{staticStyle:{width:"100%"},attrs:{type:3<=e.errorTime?"danger":"primary",size:"large"},nativeOn:{click:function(t){return e.login(t)}}},[e._v("\n                    "+e._s(e.errorTime<3?"立即登录":"请在 "+e.getLeftTime+" 秒后, 再重试!")+"\n                ")])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.loginState,expression:"!loginState"}],staticClass:"regWrapper"},[s("img",{attrs:{src:a("34a3"),width:"70%",alt:""},on:{load:e.imgComplete}}),e.loading?e._e():s("div",{staticClass:"reg"},[s("span",[e._v("请输入注册账号(Register Account)")]),s("el-input",{attrs:{placeholder:"推荐手机号或邮箱(5-25位)",clearable:""},on:{blur:function(t){return e.validateId(e.regId,t)}},model:{value:e.regId,callback:function(t){e.regId=t},expression:"regId"}}),s("span",[e._v("请输入注册密码(Register Password)")]),s("el-input",{attrs:{placeholder:"请输入密码(5-25位)",type:"password",clearable:""},on:{blur:function(t){return e.validatePass(e.regPass,t)}},model:{value:e.regPass,callback:function(t){e.regPass=t},expression:"regPass"}}),s("span",[e._v("请输入注册昵称(Register Nickname)")]),s("el-input",{attrs:{placeholder:"请输入中英文昵称(禁止数字)",clearable:""},on:{blur:function(t){return e.validateName(e.regName,t)}},nativeOn:{keyup:function(t){return"keyCode"in t&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register(t)}},model:{value:e.regName,callback:function(t){e.regName=t},expression:"regName"}}),s("div",{staticStyle:{margin:"5px 0 -5px","text-align":"center",filter:"grayscale(.5)"}},[s("el-checkbox",{staticStyle:{transform:"scale(1)"},model:{value:e.accept,callback:function(t){e.accept=t},expression:"accept"}},[s("span",{staticClass:"accept_text"},[e._v("我已阅读并接受"),s("a",[e._v("《用户协议》")]),e._v("和"),s("a",[e._v("《隐私政策》")])])])],1),s("div",{staticClass:"btns"},[s("el-button",{staticStyle:{width:"100%"},attrs:{disabled:!e.accept,size:"large",type:"primary"},on:{click:e.register}},[e._v("\n                    立即注册\n                ")]),s("el-button",{staticStyle:{margin:"0"},attrs:{type:"text"},on:{click:e.changeLogin}},[e._v("已有账号? 马上登录")])],1),s("div")],1)]),s("foot",{attrs:{btm:"5%"}})],1)},[],!1,null,"71fa6e16",null);t.default=d.exports},eab2:function(e,t,a){"use strict";var s=a("451c");a.n(s).a}}]);